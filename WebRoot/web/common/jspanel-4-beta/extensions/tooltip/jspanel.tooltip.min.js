/* jspanel.tooltip.js (c) Stefan Sträßer(Flyer53) <info@jspanel.de> license: MIT */'use strict';function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}jsPanel.tooltip||(jsPanel.tooltip={version:'1.0.0',date:'2018-03-13 09:40',defaults:{border:'1px solid',dragit:!1,resizeit:!1,headerControls:'none',delay:400,ttipEvent:'mouseover'},create:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1];a.paneltype='tooltip',a.id?'function'==typeof a.id&&(a.id=a.id()):a.id='jsPanel-'+(jsPanel.idCounter+=1);var c,d=a.target,e=a.mode||'default';if(!d)return!1;'string'==typeof d&&(d=document.querySelector(d)),d.addEventListener(jsPanel.evtStart,function(a){a.stopPropagation()},!1);var f=a;a.config&&(f=Object.assign({},a.config,a),delete f.config),f=Object.assign({},this.defaults,f),f.position=Object.assign({},a.position),f.position.of=a.position.of||d,d.addEventListener(f.ttipEvent,function(){c=window.setTimeout(function(){return!document.getElementById(a.id)&&void jsPanel.create(f,function(a){if('default'===e?d.addEventListener('mouseleave',function(){a.close()},!1):'semisticky'===e&&a.addEventListener('mouseleave',function(){a.close()},!1),a.classList.add('jsPanel-tooltip'),a.style.overflow='visible',a.header.style.cursor='default',a.footer.style.cursor='default',d.closest('.jsPanel-modal')?a.style.zIndex=d.closest('.jsPanel-modal').style.zIndex:(d.closest('.jsPanel')&&d.closest('.jsPanel').front(),a.style.zIndex=jsPanel.zi.next()),a.addEventListener(jsPanel.evtStart,function(a){a.stopPropagation()},!1),f.connector){var c='string'==typeof f.position.of?document.querySelector(f.position.of):f.position.of,g=jsPanel.tooltip.relativeTipPos(a,c);a.append(jsPanel.tooltip.addConnector(a,g))}b&&b.call(a,a)})},f.delay)},!1),d.addEventListener('mouseout',function(){window.clearTimeout(c)},!1)},relativeTipPos:function(a,b){var c=Math.round,d=a.getBoundingClientRect(),e=b.getBoundingClientRect(),f=c(e.left-d.right),g=c(e.top-d.bottom),h=c(d.left-e.right),i=c(d.top-e.bottom),j=void 0;return j=0<=g?0<=f?'left-top':0<=h?'right-top':'top':0<=i?0<=f?'left-bottom':0<=h?'right-bottom':'bottom':0<=f?'left':0<=h?'right':'over',j},addConnector:function(a,b){var c,d,e,f,g=document.createElement('div');return g.className='jsPanel-connector jsPanel-connector-'+b,'top'===b?a.style.top=parseFloat(a.style.top)-12+'px':'right'===b?a.style.left=parseFloat(a.style.left)+12+'px':'bottom'===b?a.style.top=parseFloat(a.style.top)+12+'px':'left'==b&&(a.style.left=parseFloat(a.style.left)-12+'px'),f='string'==typeof a.options.connector?a.options.connector:window.getComputedStyle(a).borderBottomColor,e=b.match(/-/)?{left:c,top:d,backgroundColor:f}:_defineProperty({left:c,top:d},'border-'+b+'-color',f),jsPanel.setStyle(g,e),g},removeConnector:function(a){var b=a.querySelector('.jsPanel-connector');a.removeChild(b)}},document.addEventListener(jsPanel.pointerdown,function(a){document.querySelectorAll('.jsPanel-tooltip').forEach(function(b){a.target.closest('.jsPanel-tooltip')||b.close()})},!1));